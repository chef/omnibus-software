--- a/src/config.h
+++ b/src/config.h
@@ -215,10 +215,16 @@
-#if (BSD >= 199103)
+#ifndef BSD
+#define BSD 0
+#endif
+
+#ifndef __has_attribute
+#define __has_attribute(x) 0
+#endif
+
 #if (BSD >= 199103)
  // Existing contents unchanged
-#endif
-
-#if defined(__x86_64__) && ((defined(__GNUC__) && __GNUC__ >= 5) || (defined(__clang__) && __clang_major__ >= 4)) && defined(__has_attribute) && __has_attribute(target)
