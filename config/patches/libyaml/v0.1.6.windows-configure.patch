--- a/include/yaml.h
+++ b/include/yaml.h
@@ -26,15 +26,7 @@
 
 /** The public API declaration. */
 
-#ifdef _WIN32
-#   if defined(YAML_DECLARE_STATIC)
-#       define  YAML_DECLARE(type)  type
-#   elif defined(YAML_DECLARE_EXPORT)
-#       define  YAML_DECLARE(type)  __declspec(dllexport) type
-#   else
-#       define  YAML_DECLARE(type)  __declspec(dllimport) type
-#   endif
-#else
+#if defined(__MINGW32__)
 #   define  YAML_DECLARE(type)  type
 #endif

--- a/src/Makefile
+++ b/src/Makefile
@@ -219,7 +219,7 @@ top_srcdir = ..
 AM_CPPFLAGS = -I$(top_srcdir)/include
 lib_LTLIBRARIES = libyaml.la
 libyaml_la_SOURCES = yaml_private.h api.c reader.c scanner.c parser.c loader.c writer.c emitter.c dumper.c
-libyaml_la_LDFLAGS = -release $(YAML_LT_RELEASE) -version-info $(YAML_LT_CURRENT):$(YAML_LT_REVISION):$(YAML_LT_AGE)
+libyaml_la_LDFLAGS = -release $(YAML_LT_RELEASE) -version-info $(YAML_LT_CURRENT):$(YAML_LT_REVISION):$(YAML_LT_AGE) -no-undefined
 all: all-am
 
 .SUFFIXES:
